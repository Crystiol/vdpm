CMAKE_MINIMUM_REQUIRED(VERSION 2.6.4 FATAL_ERROR)

SET(OSGEARTH_MAJOR_VERSION 2)
SET(OSGEARTH_MINOR_VERSION 6)
SET(OSGEARTH_PATCH_VERSION 0)
SET(OSGEARTH_SOVERSION     0)

SET(OSGEARTH_PLUGIN_PREFIX "")

SET(OSGEARTH_VERSION ${OSGEARTH_MAJOR_VERSION}.${OSGEARTH_MINOR_VERSION}.${OSGEARTH_PATCH_VERSION})

# We have some custom .cmake scripts not in the official distribution.
# Maybe this can be used override existing behavior if needed?
SET(CMAKE_MODULE_PATH "${OSGEARTH_SOURCE_DIR}/CMakeModules;${CMAKE_MODULE_PATH}")

FIND_PACKAGE(OpenGL)

# Make the headers visible to everything
INCLUDE_DIRECTORIES(
    ${OSGEARTH_SOURCE_DIR}/src
    ${OSG_INCLUDE_DIR}
)

SET(OSGEARTH_USER_DEFINED_DYNAMIC_OR_STATIC "STATIC")

INCLUDE(OsgEarthMacroUtils)

DETECT_OSG_VERSION()

SET(OPENSCENEGRAPH_VERSION ${OPENSCENEGRAPH_MAJOR_VERSION}.${OPENSCENEGRAPH_MINOR_VERSION}.${OPENSCENEGRAPH_PATCH_VERSION})

# OE Core
ADD_DEFINITIONS(-DOSGEARTH_LIBRARY_STATIC)

# osgEarth

ADD_DEFINITIONS(-DTIXML_USE_STL)

SET(LIB_NAME osgEarth)

set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/${LIB_NAME})

set(TARGET_GLSL
    AlphaEffect.frag.glsl
    DepthOffset.vert.glsl
    Draping.vert.glsl
    Draping.frag.glsl
    GPUClamping.vert.glsl
    GPUClamping.vert.lib.glsl
    GPUClamping.frag.glsl
    Instancing.vert.glsl)

set(SHADERS_CPP "${CMAKE_CURRENT_BINARY_DIR}/osgEarth/AutoGenShaders.cpp")

# set up configure variables:
set(TEMPLATE_FILE   Shaders.cpp.in )
set(GLSL_FILES      ${TARGET_GLSL} )
set(OUTPUT_CPP_FILE ${SHADERS_CPP})

# generate the build-time script that will create out cpp file with inline shaders:
configure_file(
	"${OSGEARTH_SOURCE_DIR}/CMakeModules/ConfigureShaders.cmake.in"
	"${CMAKE_CURRENT_BINARY_DIR}/osgEarth/ConfigureShaders.cmake"
	@ONLY)

# add the custom build-time command to run the script:
add_custom_command(
	OUTPUT
		"${OUTPUT_CPP_FILE}"
	COMMAND
		"${CMAKE_COMMAND}" -P "${CMAKE_CURRENT_BINARY_DIR}/osgEarth/ConfigureShaders.cmake"
	DEPENDS
		${GLSL_FILES}
		"${TEMPLATE_FILE}"
		"${OSGEARTH_SOURCE_DIR}/CMakeModules/ConfigureShaders.cmake.in" )

SET(LIB_PUBLIC_HEADERS
    ${CMAKE_CURRENT_SOURCE_DIR}/AlphaEffect
    ${CMAKE_CURRENT_SOURCE_DIR}/AutoScale
    ${CMAKE_CURRENT_SOURCE_DIR}/Bounds
    ${CMAKE_CURRENT_SOURCE_DIR}/Cache
    ${CMAKE_CURRENT_SOURCE_DIR}/CacheEstimator
    ${CMAKE_CURRENT_SOURCE_DIR}/CacheBin
    ${CMAKE_CURRENT_SOURCE_DIR}/CachePolicy
    ${CMAKE_CURRENT_SOURCE_DIR}/CacheSeed
    ${CMAKE_CURRENT_SOURCE_DIR}/Capabilities
    ${CMAKE_CURRENT_SOURCE_DIR}/Clamping
    ${CMAKE_CURRENT_SOURCE_DIR}/ClampableNode
    ${CMAKE_CURRENT_SOURCE_DIR}/ClampingTechnique
    ${CMAKE_CURRENT_SOURCE_DIR}/ColorFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/Common
    ${CMAKE_CURRENT_SOURCE_DIR}/CompositeTileSource
    ${CMAKE_CURRENT_SOURCE_DIR}/Config
    ${CMAKE_CURRENT_SOURCE_DIR}/Containers
    ${CMAKE_CURRENT_SOURCE_DIR}/Cube
    ${CMAKE_CURRENT_SOURCE_DIR}/CullingUtils
    ${CMAKE_CURRENT_SOURCE_DIR}/DateTime
    ${CMAKE_CURRENT_SOURCE_DIR}/Decluttering
    ${CMAKE_CURRENT_SOURCE_DIR}/DepthOffset
    ${CMAKE_CURRENT_SOURCE_DIR}/DPLineSegmentIntersector
    ${CMAKE_CURRENT_SOURCE_DIR}/DrapeableNode
    ${CMAKE_CURRENT_SOURCE_DIR}/DrapingTechnique
    ${CMAKE_CURRENT_SOURCE_DIR}/DrawInstanced
    ${CMAKE_CURRENT_SOURCE_DIR}/ECEF
    ${CMAKE_CURRENT_SOURCE_DIR}/ElevationField
    ${CMAKE_CURRENT_SOURCE_DIR}/ElevationLayer
    ${CMAKE_CURRENT_SOURCE_DIR}/ElevationLOD
    ${CMAKE_CURRENT_SOURCE_DIR}/ElevationQuery
    ${CMAKE_CURRENT_SOURCE_DIR}/Export
    ${CMAKE_CURRENT_SOURCE_DIR}/Extension
    ${CMAKE_CURRENT_SOURCE_DIR}/FadeEffect
    ${CMAKE_CURRENT_SOURCE_DIR}/FileUtils
    ${CMAKE_CURRENT_SOURCE_DIR}/GeoCommon
    ${CMAKE_CURRENT_SOURCE_DIR}/GeoData
    ${CMAKE_CURRENT_SOURCE_DIR}/Geoid
    ${CMAKE_CURRENT_SOURCE_DIR}/GeoMath
	${CMAKE_CURRENT_SOURCE_DIR}/GeoTransform
    ${CMAKE_CURRENT_SOURCE_DIR}/HeightFieldUtils
    ${CMAKE_CURRENT_SOURCE_DIR}/Horizon
    ${CMAKE_CURRENT_SOURCE_DIR}/HTTPClient
    ${CMAKE_CURRENT_SOURCE_DIR}/ImageLayer
    ${CMAKE_CURRENT_SOURCE_DIR}/ImageMosaic
    ${CMAKE_CURRENT_SOURCE_DIR}/ImageToHeightFieldConverter
    ${CMAKE_CURRENT_SOURCE_DIR}/ImageUtils
    ${CMAKE_CURRENT_SOURCE_DIR}/IOTypes
    ${CMAKE_CURRENT_SOURCE_DIR}/JsonUtils
    ${CMAKE_CURRENT_SOURCE_DIR}/Layer
    ${CMAKE_CURRENT_SOURCE_DIR}/LineFunctor
    ${CMAKE_CURRENT_SOURCE_DIR}/Locators
    ${CMAKE_CURRENT_SOURCE_DIR}/LocalTangentPlane
    ${CMAKE_CURRENT_SOURCE_DIR}/Map
    ${CMAKE_CURRENT_SOURCE_DIR}/MapCallback
    ${CMAKE_CURRENT_SOURCE_DIR}/MapFrame
    ${CMAKE_CURRENT_SOURCE_DIR}/MapInfo
    ${CMAKE_CURRENT_SOURCE_DIR}/MapModelChange
    ${CMAKE_CURRENT_SOURCE_DIR}/MapNode
    ${CMAKE_CURRENT_SOURCE_DIR}/MapNodeObserver
    ${CMAKE_CURRENT_SOURCE_DIR}/MapNodeOptions
    ${CMAKE_CURRENT_SOURCE_DIR}/MapOptions
    ${CMAKE_CURRENT_SOURCE_DIR}/MaskLayer
    ${CMAKE_CURRENT_SOURCE_DIR}/MaskNode
    ${CMAKE_CURRENT_SOURCE_DIR}/MaskSource
    ${CMAKE_CURRENT_SOURCE_DIR}/MemCache
    ${CMAKE_CURRENT_SOURCE_DIR}/ModelLayer
    ${CMAKE_CURRENT_SOURCE_DIR}/ModelSource
    ${CMAKE_CURRENT_SOURCE_DIR}/NativeProgramAdapter
    ${CMAKE_CURRENT_SOURCE_DIR}/NodeUtils
    ${CMAKE_CURRENT_SOURCE_DIR}/Notify
    ${CMAKE_CURRENT_SOURCE_DIR}/optional
    ${CMAKE_CURRENT_SOURCE_DIR}/ObjectIndex
    ${CMAKE_CURRENT_SOURCE_DIR}/OverlayDecorator
    ${CMAKE_CURRENT_SOURCE_DIR}/OverlayNode
	${CMAKE_CURRENT_SOURCE_DIR}/PhongLightingEffect
    ${CMAKE_CURRENT_SOURCE_DIR}/Picker
    ${CMAKE_CURRENT_SOURCE_DIR}/IntersectionPicker
    ${CMAKE_CURRENT_SOURCE_DIR}/PrimitiveIntersector
    ${CMAKE_CURRENT_SOURCE_DIR}/Profile
    ${CMAKE_CURRENT_SOURCE_DIR}/Profiler
    ${CMAKE_CURRENT_SOURCE_DIR}/Progress
    ${CMAKE_CURRENT_SOURCE_DIR}/Random
    ${CMAKE_CURRENT_SOURCE_DIR}/Registry
    ${CMAKE_CURRENT_SOURCE_DIR}/Revisioning
    ${CMAKE_CURRENT_SOURCE_DIR}/ShaderFactory
    ${CMAKE_CURRENT_SOURCE_DIR}/ShaderGenerator
    ${CMAKE_CURRENT_SOURCE_DIR}/ShaderLoader
    ${CMAKE_CURRENT_SOURCE_DIR}/ShaderUtils
	${CMAKE_CURRENT_SOURCE_DIR}/SharedSARepo
    ${CMAKE_CURRENT_SOURCE_DIR}/SpatialReference
    ${CMAKE_CURRENT_SOURCE_DIR}/StateSetCache
	${CMAKE_CURRENT_SOURCE_DIR}/StateSetLOD
    ${CMAKE_CURRENT_SOURCE_DIR}/StringUtils
    ${CMAKE_CURRENT_SOURCE_DIR}/TaskService
    ${CMAKE_CURRENT_SOURCE_DIR}/Terrain
    ${CMAKE_CURRENT_SOURCE_DIR}/TerrainEffect
    ${CMAKE_CURRENT_SOURCE_DIR}/TerrainLayer
    ${CMAKE_CURRENT_SOURCE_DIR}/TerrainOptions
    ${CMAKE_CURRENT_SOURCE_DIR}/TerrainEngineNode
    ${CMAKE_CURRENT_SOURCE_DIR}/TerrainTileNode
    ${CMAKE_CURRENT_SOURCE_DIR}/Tessellator
    ${CMAKE_CURRENT_SOURCE_DIR}/TextureCompositor
    ${CMAKE_CURRENT_SOURCE_DIR}/TileKey
    ${CMAKE_CURRENT_SOURCE_DIR}/TileHandler
    ${CMAKE_CURRENT_SOURCE_DIR}/TileSource
    ${CMAKE_CURRENT_SOURCE_DIR}/TileVisitor
    ${CMAKE_CURRENT_SOURCE_DIR}/TimeControl
    ${CMAKE_CURRENT_SOURCE_DIR}/TraversalData
    ${CMAKE_CURRENT_SOURCE_DIR}/ThreadingUtils
    ${CMAKE_CURRENT_SOURCE_DIR}/Units
    ${CMAKE_CURRENT_SOURCE_DIR}/URI
    ${CMAKE_CURRENT_SOURCE_DIR}/Utils
    ${CMAKE_CURRENT_SOURCE_DIR}/Version
    ${CMAKE_CURRENT_SOURCE_DIR}/VerticalDatum
    ${CMAKE_CURRENT_SOURCE_DIR}/Viewpoint
    ${CMAKE_CURRENT_SOURCE_DIR}/VirtualProgram
    ${CMAKE_CURRENT_SOURCE_DIR}/XmlUtils
    ${CMAKE_CURRENT_SOURCE_DIR}/tinystr.h
    ${CMAKE_CURRENT_SOURCE_DIR}/tinyxml.h
)

SET(TINYXML_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/tinystr.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tinyxml.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tinyxmlerror.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/tinyxmlparser.cpp
)

set(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/AlphaEffect.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/AutoScale.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Bounds.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Cache.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/CacheEstimator.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/CachePolicy.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/CacheSeed.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Capabilities.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Clamping.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ClampableNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ClampingTechnique.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ColorFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/CompositeTileSource.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Config.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Cube.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/CullingUtils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/DateTime.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Decluttering.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/DepthOffset.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/DPLineSegmentIntersector.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/DrapeableNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/DrapingTechnique.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/DrawInstanced.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ECEF.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ElevationField.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ElevationLayer.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ElevationLOD.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ElevationQuery.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/Extension.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/FadeEffect.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/FileUtils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/GeoData.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Geoid.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/GeoMath.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/GeoTransform.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/HeightFieldUtils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Horizon.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/HTTPClient.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ImageLayer.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ImageMosaic.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ImageToHeightFieldConverter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ImageUtils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/IOTypes.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/JsonUtils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Layer.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Locators.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/LocalTangentPlane.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Map.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MapCallback.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MapFrame.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MapInfo.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MapNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MapNodeOptions.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MapOptions.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MaskLayer.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MaskNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MaskSource.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MemCache.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MimeTypes.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ModelLayer.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ModelSource.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/NodeUtils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Notify.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ObjectIndex.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/OverlayDecorator.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/OverlayNode.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/PhongLightingEffect.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/IntersectionPicker.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/PrimitiveIntersector.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Profile.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Profiler.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Progress.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Random.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Registry.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Revisioning.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ShaderFactory.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ShaderGenerator.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ShaderLoader.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ShaderUtils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/SpatialReference.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/StateSetCache.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/StateSetLOD.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/StringUtils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TaskService.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Terrain.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TerrainLayer.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TerrainOptions.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TerrainEngineNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Tessellator.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TextureCompositor.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TileKey.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TileHandler.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TileVisitor.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TileSource.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TimeControl.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TraversalData.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ThreadingUtils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Units.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/URI.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Utils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Version.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/VerticalDatum.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Viewpoint.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/VirtualProgram.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/XmlUtils.cpp
    ${SHADERS_CPP} )

ADD_LIBRARY(${LIB_NAME} ${OSGEARTH_USER_DEFINED_DYNAMIC_OR_STATIC}
    ${LIB_PUBLIC_HEADERS}
    ${TINYXML_SRC}
    ${TARGET_SRC}
)

INCLUDE_DIRECTORIES(${GDAL_INCLUDE_DIR} ${CURL_INCLUDE_DIR} )

# osgEarthAnnotation

ADD_DEFINITIONS(-DOSGEARTHANNO_LIBRARY_STATIC)

set(LIB_NAME osgEarthAnnotation)

set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/${LIB_NAME})

set(LIB_PUBLIC_HEADERS
    ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationSettings
    ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationEditing
    ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationData
    ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationNode
    ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationRegistry
    ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationUtils
    ${CMAKE_CURRENT_SOURCE_DIR}/CircleNode
    ${CMAKE_CURRENT_SOURCE_DIR}/Common
    ${CMAKE_CURRENT_SOURCE_DIR}/Decoration
    ${CMAKE_CURRENT_SOURCE_DIR}/EllipseNode
    ${CMAKE_CURRENT_SOURCE_DIR}/Export
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureNode
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureEditing
    ${CMAKE_CURRENT_SOURCE_DIR}/LocalGeometryNode
    ${CMAKE_CURRENT_SOURCE_DIR}/HighlightDecoration
    ${CMAKE_CURRENT_SOURCE_DIR}/ImageOverlay
    ${CMAKE_CURRENT_SOURCE_DIR}/ImageOverlayEditor
    ${CMAKE_CURRENT_SOURCE_DIR}/LabelNode
    ${CMAKE_CURRENT_SOURCE_DIR}/LocalizedNode
    ${CMAKE_CURRENT_SOURCE_DIR}/ModelNode
    ${CMAKE_CURRENT_SOURCE_DIR}/OrthoNode
    ${CMAKE_CURRENT_SOURCE_DIR}/PlaceNode
    ${CMAKE_CURRENT_SOURCE_DIR}/RectangleNode
    ${CMAKE_CURRENT_SOURCE_DIR}/ScaleDecoration
    ${CMAKE_CURRENT_SOURCE_DIR}/TrackNode
)

set(LIB_COMMON_FILES
    ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationEditing.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationSettings.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationData.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationRegistry.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationUtils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/CircleNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Decoration.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/EllipseNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureEditing.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/LocalGeometryNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/HighlightDecoration.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ImageOverlay.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ImageOverlayEditor.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/LabelNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/LocalizedNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/RectangleNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ModelNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/OrthoNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/PlaceNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TrackNode.cpp
)


ADD_LIBRARY( ${LIB_NAME} ${OSGEARTH_USER_DEFINED_DYNAMIC_OR_STATIC}
    ${LIB_PUBLIC_HEADERS}
    ${LIB_COMMON_FILES}
)

# osgEarthFeatures

ADD_DEFINITIONS(-DOSGEARTHFEATURES_LIBRARY_STATIC)

set(LIB_NAME osgEarthFeatures)

set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/${LIB_NAME})

SET(LIB_PUBLIC_HEADERS
    ${CMAKE_CURRENT_SOURCE_DIR}/AltitudeFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/BufferFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/BuildGeometryFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/BuildTextFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/BuildTextOperator
    ${CMAKE_CURRENT_SOURCE_DIR}/CentroidFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/Common
    ${CMAKE_CURRENT_SOURCE_DIR}/ConvertTypeFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/CropFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/ExtrudeGeometryFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/Feature
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureCursor
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureDisplayLayout
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureDrawSet
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureListSource
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureModelGraph
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureModelSource
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureSource
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureSourceIndexNode
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureTileSource
    ${CMAKE_CURRENT_SOURCE_DIR}/Filter
    ${CMAKE_CURRENT_SOURCE_DIR}/FilterContext
    ${CMAKE_CURRENT_SOURCE_DIR}/GeometryCompiler
    ${CMAKE_CURRENT_SOURCE_DIR}/GeometryUtils
    ${CMAKE_CURRENT_SOURCE_DIR}/LabelSource
    ${CMAKE_CURRENT_SOURCE_DIR}/MeshClamper
    ${CMAKE_CURRENT_SOURCE_DIR}/OgrUtils
    ${CMAKE_CURRENT_SOURCE_DIR}/OptimizerHints
    ${CMAKE_CURRENT_SOURCE_DIR}/PolygonizeLines
    ${CMAKE_CURRENT_SOURCE_DIR}/ResampleFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/ScaleFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/Session
    ${CMAKE_CURRENT_SOURCE_DIR}/ScatterFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/Script
    ${CMAKE_CURRENT_SOURCE_DIR}/ScriptEngine
    ${CMAKE_CURRENT_SOURCE_DIR}/SubstituteModelFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/TessellateOperator
    ${CMAKE_CURRENT_SOURCE_DIR}/TextSymbolizer
    ${CMAKE_CURRENT_SOURCE_DIR}/TransformFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/VirtualFeatureSource
)

ADD_LIBRARY(${LIB_NAME} ${OSGEARTH_USER_DEFINED_DYNAMIC_OR_STATIC}
    ${LIB_PUBLIC_HEADERS}
    ${CMAKE_CURRENT_SOURCE_DIR}/AltitudeFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/BufferFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/BuildGeometryFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/BuildTextFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/BuildTextOperator.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/CentroidFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ConvertTypeFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/CropFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ExtrudeGeometryFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Feature.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureCursor.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureDisplayLayout.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureDrawSet.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/FeatureListSource.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureModelGraph.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureModelSource.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureSource.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureSourceIndexNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureTileSource.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Filter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/FilterContext.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/GeometryCompiler.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/GeometryUtils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/LabelSource.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MeshClamper.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/OgrUtils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/OptimizerHints.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/PolygonizeLines.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ResampleFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ScaleFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Session.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ScatterFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ScriptEngine.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/SubstituteModelFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TessellateOperator.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TextSymbolizer.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TransformFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/VirtualFeatureSource.cpp
)

# osgEarthUtil

ADD_DEFINITIONS(-DOSGEARTHUTIL_LIBRARY_STATIC)

set(LIB_NAME osgEarthUtil)

set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/${LIB_NAME})

SET(HEADERS_ROOT
	${CMAKE_CURRENT_SOURCE_DIR}/ActivityMonitorTool
    ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationEvents
    ${CMAKE_CURRENT_SOURCE_DIR}/AutoClipPlaneHandler
    ${CMAKE_CURRENT_SOURCE_DIR}/ArcGIS
    ${CMAKE_CURRENT_SOURCE_DIR}/AtlasBuilder
    ${CMAKE_CURRENT_SOURCE_DIR}/Common
    ${CMAKE_CURRENT_SOURCE_DIR}/Controls
    ${CMAKE_CURRENT_SOURCE_DIR}/ContourMap
    ${CMAKE_CURRENT_SOURCE_DIR}/ClampCallback
    ${CMAKE_CURRENT_SOURCE_DIR}/DataScanner
    ${CMAKE_CURRENT_SOURCE_DIR}/EarthManipulator
    ${CMAKE_CURRENT_SOURCE_DIR}/Ephemeris
    ${CMAKE_CURRENT_SOURCE_DIR}/ExampleResources
	${CMAKE_CURRENT_SOURCE_DIR}/Export
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureQueryTool
    ${CMAKE_CURRENT_SOURCE_DIR}/Fog
    ${CMAKE_CURRENT_SOURCE_DIR}/Formatter
    ${CMAKE_CURRENT_SOURCE_DIR}/GeodeticGraticule
    ${CMAKE_CURRENT_SOURCE_DIR}/GraticuleExtension
    ${CMAKE_CURRENT_SOURCE_DIR}/GraticuleNode
    ${CMAKE_CURRENT_SOURCE_DIR}/GraticuleOptions
    ${CMAKE_CURRENT_SOURCE_DIR}/GraticuleTerrainEffect
    ${CMAKE_CURRENT_SOURCE_DIR}/HTM
    ${CMAKE_CURRENT_SOURCE_DIR}/LatLongFormatter
    ${CMAKE_CURRENT_SOURCE_DIR}/LineOfSight
    ${CMAKE_CURRENT_SOURCE_DIR}/LinearLineOfSight
	${CMAKE_CURRENT_SOURCE_DIR}/LODBlending
    ${CMAKE_CURRENT_SOURCE_DIR}/LogarithmicDepthBuffer
    ${CMAKE_CURRENT_SOURCE_DIR}/MeasureTool
    ${CMAKE_CURRENT_SOURCE_DIR}/MGRSFormatter
    ${CMAKE_CURRENT_SOURCE_DIR}/MGRSGraticule
    ${CMAKE_CURRENT_SOURCE_DIR}/MouseCoordsTool
    ${CMAKE_CURRENT_SOURCE_DIR}/ObjectLocator
    ${CMAKE_CURRENT_SOURCE_DIR}/Ocean
    ${CMAKE_CURRENT_SOURCE_DIR}/PolyhedralLineOfSight
    ${CMAKE_CURRENT_SOURCE_DIR}/RadialLineOfSight
	${CMAKE_CURRENT_SOURCE_DIR}/RTTPicker
	${CMAKE_CURRENT_SOURCE_DIR}/Shaders
    ${CMAKE_CURRENT_SOURCE_DIR}/Shadowing
    ${CMAKE_CURRENT_SOURCE_DIR}/SimplexNoise
    ${CMAKE_CURRENT_SOURCE_DIR}/Sky
    ${CMAKE_CURRENT_SOURCE_DIR}/SpatialData
	${CMAKE_CURRENT_SOURCE_DIR}/StarData
    ${CMAKE_CURRENT_SOURCE_DIR}/TerrainProfile
    ${CMAKE_CURRENT_SOURCE_DIR}/TileIndex
    ${CMAKE_CURRENT_SOURCE_DIR}/TileIndexBuilder
    ${CMAKE_CURRENT_SOURCE_DIR}/TFS
    ${CMAKE_CURRENT_SOURCE_DIR}/TFSPackager
    ${CMAKE_CURRENT_SOURCE_DIR}/TMS
    ${CMAKE_CURRENT_SOURCE_DIR}/TMSBackFiller
    ${CMAKE_CURRENT_SOURCE_DIR}/TMSPackager
    ${CMAKE_CURRENT_SOURCE_DIR}/UTMGraticule
    ${CMAKE_CURRENT_SOURCE_DIR}/VerticalScale
    ${CMAKE_CURRENT_SOURCE_DIR}/WFS
    ${CMAKE_CURRENT_SOURCE_DIR}/WMS
)

set(SHADERS_CPP
    "${CMAKE_CURRENT_BINARY_DIR}/osgEarthUtil/AutoGenShaders.cpp")

set(TARGET_GLSL
    ContourMap.vert.glsl
    ContourMap.frag.glsl
    Fog.vert.glsl
    Fog.frag.glsl
    Graticule.vert.glsl
    Graticule.frag.glsl
    LogDepthBuffer.vert.glsl
    LogDepthBuffer.VertOnly.vert.glsl
    LogDepthBuffer.frag.glsl )

# set up configure variables:
set(TEMPLATE_FILE   Shaders.cpp.in )
set(GLSL_FILES      ${TARGET_GLSL} )
set(OUTPUT_CPP_FILE ${SHADERS_CPP})

# generate the build-time script that will create out cpp file with inline shaders:
configure_file(
	"${OSGEARTH_SOURCE_DIR}/CMakeModules/ConfigureShaders.cmake.in"
	"${CMAKE_CURRENT_BINARY_DIR}/osgEarthUtil/ConfigureShaders.cmake"
	@ONLY)

# add the custom build-time command to run the script:
add_custom_command(
	OUTPUT
		"${OUTPUT_CPP_FILE}"
	COMMAND
		"${CMAKE_COMMAND}" -P "${CMAKE_CURRENT_BINARY_DIR}/osgEarthUtil/ConfigureShaders.cmake"
	DEPENDS
		${GLSL_FILES}
		"${TEMPLATE_FILE}"
		"${OSGEARTH_SOURCE_DIR}/CMakeModules/ConfigureShaders.cmake.in" )

SET(SOURCES_ROOT
	${CMAKE_CURRENT_SOURCE_DIR}/ActivityMonitorTool.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationEvents.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ArcGIS.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/AtlasBuilder.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/AutoClipPlaneHandler.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ClampCallback.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Controls.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ContourMap.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/DataScanner.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/EarthManipulator.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Ephemeris.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/ExampleResources.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureQueryTool.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Fog.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/GeodeticGraticule.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/GraticuleExtension.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/GraticuleTerrainEffect.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/GraticuleNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/HTM.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/LatLongFormatter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/LinearLineOfSight.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/LogarithmicDepthBuffer.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/LODBlending.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MeasureTool.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MGRSFormatter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MGRSGraticule.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MouseCoordsTool.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ObjectLocator.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Ocean.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/PolyhedralLineOfSight.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/RadialLineOfSight.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/RTTPicker.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/Shadowing.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/SimplexNoise.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/SpatialData.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Sky.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/TerrainProfile.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TileIndex.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TileIndexBuilder.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TFS.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TFSPackager.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TMS.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TMSBackFiller.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TMSPackager.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/UTMGraticule.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/VerticalScale.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/WFS.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/WMS.cpp
    ${SHADERS_CPP}
)

SET(HEADERS_COLORFILTER
    ${CMAKE_CURRENT_SOURCE_DIR}/BrightnessContrastColorFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/CMYKColorFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/GammaColorFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/GLSLColorFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/HSLColorFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/RGBColorFilter
    ${CMAKE_CURRENT_SOURCE_DIR}/ChromaKeyColorFilter
)

SET(SOURCES_COLORFILTER
    ${CMAKE_CURRENT_SOURCE_DIR}/BrightnessContrastColorFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/CMYKColorFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/GammaColorFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/GLSLColorFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/HSLColorFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/RGBColorFilter.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ChromaKeyColorFilter.cpp
)

SET(LIB_PUBLIC_HEADERS
    ${HEADERS_ROOT}
    ${HEADERS_COLORFILTER}
)

SET(LIB_COMMON_FILES
    ${SOURCES_ROOT} ${SOURCES_COLORFILTER}
)

ADD_LIBRARY(${LIB_NAME} ${OSGEARTH_USER_DEFINED_DYNAMIC_OR_STATIC}
    ${LIB_PUBLIC_HEADERS}
    ${LIB_COMMON_FILES}
)

# osgEarthSymbology

ADD_DEFINITIONS(-DOSGEARTHSYMBOLOGY_LIBRARY_STATIC)

set(LIB_NAME osgEarthSymbology)

set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/${LIB_NAME})

SET(LIB_PUBLIC_HEADERS
#   header files go here
    ${CMAKE_CURRENT_SOURCE_DIR}/AGG.h
    ${CMAKE_CURRENT_SOURCE_DIR}/AltitudeSymbol
    ${CMAKE_CURRENT_SOURCE_DIR}/Common
    ${CMAKE_CURRENT_SOURCE_DIR}/Color
    ${CMAKE_CURRENT_SOURCE_DIR}/CoverageSymbol
    ${CMAKE_CURRENT_SOURCE_DIR}/CssUtils
    ${CMAKE_CURRENT_SOURCE_DIR}/Expression
    ${CMAKE_CURRENT_SOURCE_DIR}/ExtrusionSymbol
    ${CMAKE_CURRENT_SOURCE_DIR}/Fill
    ${CMAKE_CURRENT_SOURCE_DIR}/Geometry
    ${CMAKE_CURRENT_SOURCE_DIR}/GeometryFactory
    ${CMAKE_CURRENT_SOURCE_DIR}/GEOS
    ${CMAKE_CURRENT_SOURCE_DIR}/GeometryRasterizer
    ${CMAKE_CURRENT_SOURCE_DIR}/IconResource
    ${CMAKE_CURRENT_SOURCE_DIR}/IconSymbol
    ${CMAKE_CURRENT_SOURCE_DIR}/InstanceResource
    ${CMAKE_CURRENT_SOURCE_DIR}/InstanceSymbol
    ${CMAKE_CURRENT_SOURCE_DIR}/LineSymbol
    ${CMAKE_CURRENT_SOURCE_DIR}/MarkerResource
    ${CMAKE_CURRENT_SOURCE_DIR}/MarkerSymbol
    ${CMAKE_CURRENT_SOURCE_DIR}/MeshConsolidator
    ${CMAKE_CURRENT_SOURCE_DIR}/MeshFlattener
    ${CMAKE_CURRENT_SOURCE_DIR}/MeshSubdivider
    ${CMAKE_CURRENT_SOURCE_DIR}/ModelResource
    ${CMAKE_CURRENT_SOURCE_DIR}/ModelSymbol
    ${CMAKE_CURRENT_SOURCE_DIR}/PointSymbol
    ${CMAKE_CURRENT_SOURCE_DIR}/PolygonSymbol
    ${CMAKE_CURRENT_SOURCE_DIR}/Query
    ${CMAKE_CURRENT_SOURCE_DIR}/RenderSymbol
    ${CMAKE_CURRENT_SOURCE_DIR}/Resource
    ${CMAKE_CURRENT_SOURCE_DIR}/ResourceCache
    ${CMAKE_CURRENT_SOURCE_DIR}/ResourceLibrary
    ${CMAKE_CURRENT_SOURCE_DIR}/Skins
    ${CMAKE_CURRENT_SOURCE_DIR}/StencilVolumeNode
    ${CMAKE_CURRENT_SOURCE_DIR}/Stroke
    ${CMAKE_CURRENT_SOURCE_DIR}/Style
    ${CMAKE_CURRENT_SOURCE_DIR}/StyleSelector
    ${CMAKE_CURRENT_SOURCE_DIR}/StyleSheet
    ${CMAKE_CURRENT_SOURCE_DIR}/Symbol
    ${CMAKE_CURRENT_SOURCE_DIR}/Tags
    ${CMAKE_CURRENT_SOURCE_DIR}/TextSymbol
)

ADD_LIBRARY(${LIB_NAME} ${OSGEARTH_USER_DEFINED_DYNAMIC_OR_STATIC}
    ${LIB_PUBLIC_HEADERS}
#  .cpp files go here
    ${CMAKE_CURRENT_SOURCE_DIR}/AGG.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/AltitudeSymbol.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Color.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/CoverageSymbol.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/CssUtils.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Expression.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ExtrusionSymbol.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Fill.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Geometry.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/GeometryFactory.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/GEOS.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/GeometryRasterizer.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/IconResource.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/IconSymbol.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/InstanceResource.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/InstanceSymbol.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/LineSymbol.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MarkerResource.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MarkerSymbol.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MeshConsolidator.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MeshFlattener.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MeshSubdivider.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ModelResource.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ModelSymbol.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/PointSymbol.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/PolygonSymbol.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Query.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/RenderSymbol.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Resource.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ResourceCache.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/ResourceLibrary.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Skins.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/StencilVolumeNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Stroke.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Style.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/StyleSelector.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/StyleSheet.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/Symbol.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TextSymbol.cpp
)

# osgEarthDrivers

SET(TARGET_DEFAULT_PREFIX "osgdb_")

# earth
SET(TARGET_NAME "earth")
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/${TARGET_NAME})

SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/EarthFileSerializer)

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/ReaderWriterOsgEarth.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/EarthFileSerializer1.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/EarthFileSerializer2.cpp)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# kml
SET(TARGET_NAME "kml")
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/${TARGET_NAME})

SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/KML
    ${CMAKE_CURRENT_SOURCE_DIR}/KMLOptions
    ${CMAKE_CURRENT_SOURCE_DIR}/KMLReader
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Common
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Container
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Document
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Feature
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Folder
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Geometry
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_GroundOverlay
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_IconStyle
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_LabelStyle
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_LinearRing
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_LineString
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_LineStyle
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Model
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_MultiGeometry
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_NetworkLinkControl
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Object
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Overlay
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_PhotoOverlay
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Point
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Polygon
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_PolyStyle
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Root
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Schema
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_ScreenOverlay
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Style
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_StyleMap
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_StyleSelector
    ${CMAKE_CURRENT_SOURCE_DIR}/KMZArchive
)

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/ReaderWriterKML.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KMLReader.cpp

    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Document.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Feature.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Folder.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Geometry.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_GroundOverlay.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_IconStyle.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_LabelStyle.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_LinearRing.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_LineString.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_LineStyle.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Model.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_MultiGeometry.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_NetworkLink.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_NetworkLinkControl.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Object.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Overlay.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_PhotoOverlay.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Placemark.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Point.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Polygon.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_PolyStyle.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Root.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Schema.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_ScreenOverlay.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_Style.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KML_StyleMap.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KMZArchive.cpp
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_wcs
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/wcs)
SET(TARGET_NAME "osgearth_wcs")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/ReaderWriterWCS.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/WCS11Source.cpp
)

SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/WCS11Source.h
    ${CMAKE_CURRENT_SOURCE_DIR}/WCSOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_wms
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/wms)
SET(TARGET_NAME "osgearth_wms")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/ReaderWriterWMS.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TileService.cpp
)

SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/TileService
    ${CMAKE_CURRENT_SOURCE_DIR}/WMSOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_tilecache
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/tilecache)
SET(TARGET_NAME "osgearth_tilecache")

SET(TARGET_SRC ${CMAKE_CURRENT_SOURCE_DIR}/ReaderWriterTileCache.cpp)

SET(TARGET_H ${CMAKE_CURRENT_SOURCE_DIR}/TileCacheOptions)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_tileservice
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/tileservice)
SET(TARGET_NAME "osgearth_tileservice")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/ReaderWriterTileService.cpp
)
SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/TileServiceOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_yahoo
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/yahoo)
SET(TARGET_NAME "osgearth_yahoo")

SET(TARGET_SRC ${CMAKE_CURRENT_SOURCE_DIR}/ReaderWriterYahoo.cpp)
SET(TARGET_H ${CMAKE_CURRENT_SOURCE_DIR}/YahooOptions)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_arcgis_map_cache
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/arcgis_map_cache)
SET(TARGET_NAME "osgearth_arcgis_map_cache")

SET(TARGET_SRC ${CMAKE_CURRENT_SOURCE_DIR}/ReaderWriterArcGISMapCache.cpp)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC})

# osgearth_arcgis
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/arcgis)
SET(TARGET_NAME "osgearth_arcgis")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/ReaderWriterArcGIS.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MapService.cpp
)

# headers to show in IDE
SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/Extent.h
    ${CMAKE_CURRENT_SOURCE_DIR}/MapService.h
    ${CMAKE_CURRENT_SOURCE_DIR}/ArcGISOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_tms
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/tms)
SET(TARGET_NAME "osgearth_tms")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/TMSPlugin.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TMSTileSource.cpp
)
SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/TMSOptions
	${CMAKE_CURRENT_SOURCE_DIR}/TMSTileSource
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_vpb
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/vpb)
SET(TARGET_NAME "osgearth_vpb")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/ReaderWriterVPB.cpp
)

SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/VPBOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_osg
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/osg)
SET(TARGET_NAME "osgearth_osg")

SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/OSGOptions
)
SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/OSGTileSource.cpp
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_agglite
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/agglite)
SET(TARGET_NAME "osgearth_agglite")

SET(TARGET_SRC
	${CMAKE_CURRENT_SOURCE_DIR}/AGGLiteRasterizerTileSource.cpp)

SET(TARGET_H
	${CMAKE_CURRENT_SOURCE_DIR}/AGGLiteOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_model_simple
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/model_simple)
SET(TARGET_NAME "osgearth_model_simple")

SET(TARGET_SRC ${CMAKE_CURRENT_SOURCE_DIR}/SimpleModelSource.cpp)
SET(TARGET_H ${CMAKE_CURRENT_SOURCE_DIR}/SimpleModelOptions)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_debug
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/debug)
SET(TARGET_NAME "osgearth_debug")

SET(TARGET_SRC ${CMAKE_CURRENT_SOURCE_DIR}/DebugTileSource.cpp)
SET(TARGET_H ${CMAKE_CURRENT_SOURCE_DIR}/DebugOptions)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_cache_filesystem
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/cache_filesystem)
SET(TARGET_NAME "osgearth_cache_filesystem")

ADD_DEFINITIONS(-DOSGEARTH_HAVE_ZLIB)

SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/FileSystemCache
)
SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/FileSystemCache.cpp
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_refresh
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/refresh)
SET(TARGET_NAME "osgearth_refresh")

SET(TARGET_SRC
  ${CMAKE_CURRENT_SOURCE_DIR}/ReaderWriterRefresh.cpp
)
SET(TARGET_H
  ${CMAKE_CURRENT_SOURCE_DIR}/RefreshOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_xyz
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/xyz)
SET(TARGET_NAME "osgearth_xyz")

SET(TARGET_SRC
  ${CMAKE_CURRENT_SOURCE_DIR}/ReaderWriterXYZ.cpp
)
SET(TARGET_H
  ${CMAKE_CURRENT_SOURCE_DIR}/XYZOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_bing
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/bing)
SET(TARGET_NAME "osgearth_bing")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/BingTileSource.cpp
)

# headers to show in IDE
SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/BingOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_tileindex
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/tileindex)
SET(TARGET_NAME "osgearth_tileindex")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/ReaderWriterTileIndex.cpp
)
SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/TileIndexOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_splat_mask
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/splat_mask)
SET(TARGET_NAME "osgearth_splat_mask")

SET(TARGET_SRC ${CMAKE_CURRENT_SOURCE_DIR}/SplatMaskDriver.cpp)
SET(TARGET_H ${CMAKE_CURRENT_SOURCE_DIR}/SplatMaskOptions)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_colorramp
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/colorramp)
SET(TARGET_NAME "osgearth_colorramp")

SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/ColorRampOptions
)
SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/ColorRampTileSource.cpp
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_gdal
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/gdal)
SET(TARGET_NAME "osgearth_gdal")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/ReaderWriterGDAL.cpp
)
SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/GDALOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_feature_ogr
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/feature_ogr)
SET(TARGET_NAME "osgearth_feature_ogr")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureSourceOGR.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureCursorOGR.cpp
)

SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureCursorOGR
    ${CMAKE_CURRENT_SOURCE_DIR}/OGRFeatureOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_feature_wfs
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/feature_wfs)
SET(TARGET_NAME "osgearth_feature_wfs")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureSourceWFS.cpp
)

SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/WFSFeatureOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_feature_tfs
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/feature_tfs)
SET(TARGET_NAME "osgearth_feature_tfs")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureSourceTFS.cpp
)

SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/TFSFeatureOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_model_feature_stencil
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/model_feature_stencil)
SET(TARGET_NAME "osgearth_model_feature_stencil")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureStencilModelSource.cpp
)

SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureStencilModelOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_model_feature_geom
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/model_feature_geom)
SET(TARGET_NAME "osgearth_model_feature_geom")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureGeomModelSource.cpp )

SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/FeatureGeomModelOptions )

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_mask_feature
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/mask_feature)
SET(TARGET_NAME "osgearth_mask_feature")

SET(TARGET_SRC ${CMAKE_CURRENT_SOURCE_DIR}/FeatureMaskSource.cpp)
SET(TARGET_H ${CMAKE_CURRENT_SOURCE_DIR}/FeatureMaskOptions)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_label_annotation
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/label_annotation)
SET(TARGET_NAME "osgearth_label_annotation")

SET(TARGET_SRC ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationLabelSource.cpp)
SET(TARGET_H ${CMAKE_CURRENT_SOURCE_DIR}/AnnotationLabelSource)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_engine_mp
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/engine_mp)
SET(TARGET_NAME "osgearth_engine_mp")

set(TARGET_GLSL
    MPEngine.vert.model.glsl
    MPEngine.vert.view.glsl
    MPEngine.frag.glsl)

set(SHADERS_CPP "${CMAKE_CURRENT_BINARY_DIR}/osgEarthDrivers/engine_mp/AutoGenShaders.cpp")

# set up configure variables:
set(TEMPLATE_FILE   MPShaders.cpp.in )
set(GLSL_FILES      ${TARGET_GLSL} )
set(OUTPUT_CPP_FILE ${SHADERS_CPP})

# generate the build-time script that will create out cpp file with inline shaders:
configure_file(
	"${OSGEARTH_SOURCE_DIR}/CMakeModules/ConfigureShaders.cmake.in"
	"${CMAKE_CURRENT_BINARY_DIR}/osgEarthDrivers/engine_mp/ConfigureShaders.cmake"
	@ONLY)

# add the custom build-time command to run the script:
add_custom_command(
	OUTPUT
		"${OUTPUT_CPP_FILE}"
	COMMAND
		"${CMAKE_COMMAND}" -P "${CMAKE_CURRENT_BINARY_DIR}/osgEarthDrivers/engine_mp/ConfigureShaders.cmake"
	DEPENDS
		${GLSL_FILES}
		"${TEMPLATE_FILE}"
		"${OSGEARTH_SOURCE_DIR}/CMakeModules/ConfigureShaders.cmake.in" )

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/HeightFieldCache.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/KeyNodeFactory.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MPGeometry.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MPTerrainEngineNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/MPTerrainEngineDriver.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/SingleKeyNodeFactory.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TerrainNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TileGroup.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TileModel.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TileModelCompiler.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TileNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TileNodeRegistry.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TileModelFactory.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/TilePagedLOD.cpp
    ${SHADERS_CPP}
)

SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/Common
    ${CMAKE_CURRENT_SOURCE_DIR}/DynamicLODScaleCallback
    ${CMAKE_CURRENT_SOURCE_DIR}/HeightFieldCache
    ${CMAKE_CURRENT_SOURCE_DIR}/FileLocationCallback
    ${CMAKE_CURRENT_SOURCE_DIR}/KeyNodeFactory
    ${CMAKE_CURRENT_SOURCE_DIR}/MPGeometry
    ${CMAKE_CURRENT_SOURCE_DIR}/MPShaders
    ${CMAKE_CURRENT_SOURCE_DIR}/MPTerrainEngineNode
    ${CMAKE_CURRENT_SOURCE_DIR}/MPTerrainEngineOptions
    ${CMAKE_CURRENT_SOURCE_DIR}/QuickReleaseGLObjects
    ${CMAKE_CURRENT_SOURCE_DIR}/SingleKeyNodeFactory
    ${CMAKE_CURRENT_SOURCE_DIR}/TerrainNode
    ${CMAKE_CURRENT_SOURCE_DIR}/TileGroup
    ${CMAKE_CURRENT_SOURCE_DIR}/TileModel
    ${CMAKE_CURRENT_SOURCE_DIR}/TileModelCompiler
    ${CMAKE_CURRENT_SOURCE_DIR}/TileNode
    ${CMAKE_CURRENT_SOURCE_DIR}/TileNodeRegistry
    ${CMAKE_CURRENT_SOURCE_DIR}/TileModelFactory
    ${CMAKE_CURRENT_SOURCE_DIR}/TilePagedLOD
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_engine_byo
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/engine_byo)
SET(TARGET_NAME "osgearth_engine_byo")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/BYOTerrainEngineNode.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/BYOTerrainEngineDriver.cpp
)

SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/Common
    ${CMAKE_CURRENT_SOURCE_DIR}/BYOTerrainEngineNode
    ${CMAKE_CURRENT_SOURCE_DIR}/BYOTerrainEngineOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_engine_quadtree
#set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/engine_quadtree)
#SET(TARGET_NAME "osgearth_engine_quadtree")

#SET(TARGET_SRC
#    ${CMAKE_CURRENT_SOURCE_DIR}/CustomPagedLOD.cpp
#    ${CMAKE_CURRENT_SOURCE_DIR}/KeyNodeFactory.cpp
#    ${CMAKE_CURRENT_SOURCE_DIR}/LODFactorCallback.cpp
#    ${CMAKE_CURRENT_SOURCE_DIR}/QuadTreeTerrainEngineNode.cpp
#    ${CMAKE_CURRENT_SOURCE_DIR}/QuadTreeTerrainEngineDriver.cpp
#    ${CMAKE_CURRENT_SOURCE_DIR}/SerialKeyNodeFactory.cpp
#    ${CMAKE_CURRENT_SOURCE_DIR}/TerrainNode.cpp
#    ${CMAKE_CURRENT_SOURCE_DIR}/TileModelCompiler.cpp
#    ${CMAKE_CURRENT_SOURCE_DIR}/TileNode.cpp
#    ${CMAKE_CURRENT_SOURCE_DIR}/TileNodeRegistry.cpp
#    ${CMAKE_CURRENT_SOURCE_DIR}/TileModelFactory.cpp
#)

#SET(TARGET_H
#    ${CMAKE_CURRENT_SOURCE_DIR}/Common
#    ${CMAKE_CURRENT_SOURCE_DIR}/CustomPagedLOD
#    ${CMAKE_CURRENT_SOURCE_DIR}/DynamicLODScaleCallback
#    ${CMAKE_CURRENT_SOURCE_DIR}/FileLocationCallback
#    ${CMAKE_CURRENT_SOURCE_DIR}/KeyNodeFactory
#    ${CMAKE_CURRENT_SOURCE_DIR}/LODFactorCallback
#    ${CMAKE_CURRENT_SOURCE_DIR}/QuadTreeTerrainEngineNode
#    ${CMAKE_CURRENT_SOURCE_DIR}/QuadTreeTerrainEngineOptions
#    ${CMAKE_CURRENT_SOURCE_DIR}/QuickReleaseGLObjects
#    ${CMAKE_CURRENT_SOURCE_DIR}/SerialKeyNodeFactory
#    ${CMAKE_CURRENT_SOURCE_DIR}/TerrainNode
#    ${CMAKE_CURRENT_SOURCE_DIR}/TileModel
#    ${CMAKE_CURRENT_SOURCE_DIR}/TileModelCompiler
#    ${CMAKE_CURRENT_SOURCE_DIR}/TileNode
#    ${CMAKE_CURRENT_SOURCE_DIR}/TileNodeRegistry
#    ${CMAKE_CURRENT_SOURCE_DIR}/TileModelFactory
#)

#SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

#ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_vdatum_egm84
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/vdatum_egm84)
SET(TARGET_NAME "osgearth_vdatum_egm84")

SET(TARGET_SRC ${CMAKE_CURRENT_SOURCE_DIR}/EGM84.cpp)
SET(TARGET_H ${CMAKE_CURRENT_SOURCE_DIR}/EGM84Grid.h)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_vdatum_egm96
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/vdatum_egm96)
SET(TARGET_NAME "osgearth_vdatum_egm96")

SET(TARGET_SRC ${CMAKE_CURRENT_SOURCE_DIR}/EGM96.cpp)
SET(TARGET_H ${CMAKE_CURRENT_SOURCE_DIR}/EGM96Grid.h)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_vdatum_egm2008
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/vdatum_egm2008)
SET(TARGET_NAME "osgearth_vdatum_egm2008")

SET(TARGET_SRC ${CMAKE_CURRENT_SOURCE_DIR}/EGM2008.cpp)
SET(TARGET_H ${CMAKE_CURRENT_SOURCE_DIR}/EGM2008Grid.h)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_sky_gl
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/sky_gl)
SET(TARGET_NAME "osgearth_sky_gl")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/GLSkyDriver.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/GLSkyNode.cpp
)
SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/GLSkyOptions
	${CMAKE_CURRENT_SOURCE_DIR}/GLSkyNode
    ${CMAKE_CURRENT_SOURCE_DIR}/GLSkyShaders
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_sky_simple
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/sky_simple)
SET(TARGET_NAME "osgearth_sky_simple")

SET(TARGET_SRC
    ${CMAKE_CURRENT_SOURCE_DIR}/SimpleSkyDriver.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/SimpleSkyNode.cpp
)
SET(TARGET_H
    ${CMAKE_CURRENT_SOURCE_DIR}/SimpleSkyOptions
	${CMAKE_CURRENT_SOURCE_DIR}/SimpleSkyNode
    ${CMAKE_CURRENT_SOURCE_DIR}/SimpleSkyShaders
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_ocean_simple
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/ocean_simple)
SET(TARGET_NAME "osgearth_ocean_simple")

SET(TARGET_SRC ${CMAKE_CURRENT_SOURCE_DIR}/ElevationProxyImageLayer.cpp
               ${CMAKE_CURRENT_SOURCE_DIR}/SimpleOceanDriver.cpp
               ${CMAKE_CURRENT_SOURCE_DIR}/SimpleOceanNode.cpp
)

SET(TARGET_H   ${CMAKE_CURRENT_SOURCE_DIR}/ElevationProxyImageLayer
               ${CMAKE_CURRENT_SOURCE_DIR}/SimpleOceanOptions
               ${CMAKE_CURRENT_SOURCE_DIR}/SimpleOceanNode
               ${CMAKE_CURRENT_SOURCE_DIR}/SimpleOceanShaders
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})

# osgearth_template_matclass
set(CMAKE_CURRENT_SOURCE_DIR ${OSGEARTH_SOURCE_DIR}/src/osgEarthDrivers/template_matclass)
SET(TARGET_NAME "osgearth_template_matclass")

SET(TARGET_SRC
	${CMAKE_CURRENT_SOURCE_DIR}/TemplateMatClassDriver.cpp)

SET(TARGET_H
	${CMAKE_CURRENT_SOURCE_DIR}/TemplateMatClassOptions
)

SET(TARGET_TARGETNAME "${TARGET_DEFAULT_PREFIX}${TARGET_NAME}")

ADD_LIBRARY(${TARGET_TARGETNAME} STATIC ${TARGET_SRC} ${TARGET_H})
